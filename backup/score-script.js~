// https://procesos.intec.edu.do/Reporte/Index?indiceReporte=5

// Return the list of all not course yet subjects.
const notCourseYetSubjects = [];
const subjectsNotYetTakenTotalCredits = 0;

// Return the subjects that you did not course yet.
function getSubjectsRest() {
  const container = document.getElementsByClassName("uk-width-1-1 print-table")[0];
  const trimesters = container.getElementsByTagName("tbody");

  const subjectsRest = []; // Array<{ code, name, credits }>.
  for(let i = 0; i < trimesters.length; i++) {
    const trimester = trimesters[i];
    subjectsRest.push(findSubjectsRest(trimester));
  }

  return subjectsRest;
}

// Return the subjects that did not course yet in specific tirmester.
function findSubjectsRest(trimester) {
  const subjects = [];

  const subjectsTable = trimester.getElementsByTagName("tr");

  for(let i = 0; i < subjectsTable.length; i++) {
    const subjectRow = subjectsTable[i];
    const columns = subjectRow.getElementsByTagName("td");

    const isValidTrimester = columns.length == 12;
    if(!isValidTrimester)
      continue;

    const didNotCourseYet = columns[4].innerText.length == 0;
    if(didNotCourseYet) {
      const subject = {
        code: columns[1].innerText,
        name: columns[2].innerText,
        credits: columns[6].innerText
      };

      notCourseYetSubjects.push(subject);
      subjectsNotYetTakenTotalCredits += parseInt(subject.credits, 10);

      subjects.push(subject);
    }
  }
  return subjects;
}


const rest = getSubjectsRest();
console.log(rest);
console.log(notCourseYetSubjects);
console.log("Creditos faltantes: ", subjectsNotYetTakenTotalCredits);
