import React, {FC} from "react"
import { makeStyles, createStyles, Theme } from "@material-ui/core/styles"
import { Typography, Divider, Link} from "@material-ui/core"
import { BarChart, MonetizationOn, } from "@material-ui/icons";
import AccountBalanceWalletIcon from '@material-ui/icons/AccountBalanceWallet';
import { AccountCircle as AccountCircleIcon, AccountBalance as AccountBalanceIcon } from "@material-ui/icons";
import { graphql, useStaticQuery } from "gatsby"
import { Link as ReachRouterLink } from "@reach/router";
import ToolbarItem from "./toolbar-item"
import Img from "gatsby-image"
import Products from "screens/products";
import Transactions from "screens/transactions";
import Loans from "screens/loans";
import UserProfile from "screens/user-profile";

const useStyles = makeStyles((theme: Theme) =>
  createStyles({
    toolbar: {
      ...theme.mixins.toolbar,
      padding: 10,
      display: "flex",
      alignItems: "center",
      alignContent: "center",
    },
    title: {
      marginLeft: 10,
    },
    titleLink: {
      textDecoration: 'none',
    }
  })
)

function loadUserImage() {
  const data = useStaticQuery(graphql`
    query MyQuery {
      file(absolutePath: { regex: "/icon.png/" }) {
        childImageSharp {
          fixed(width: 40, height: 40) {
            ...GatsbyImageSharpFixed
          }
        }
      }
    }
  `);

  return data;
}

interface IToolbarListProps {
  title?: string;
}

const ToolbarList: FC<IToolbarListProps> = ({ title }) => {
  const classes = useStyles()
  const userImageFile = loadUserImage();

  return (
    <div>
      <div className={classes.toolbar}>
        <Img fixed={userImageFile.file.childImageSharp.fixed} />
        <Link
          to="/app/"
          component={ReachRouterLink}
          color="inherit"
          className={classes.titleLink}
          style={{ textDecoration: "none" }}
        >
          <Typography variant="h5" className={classes.title}>
            {title}
          </Typography>
        </Link>
      </div>
      <Divider />
      <ToolbarItem title="Inicio" icon={<AccountBalanceIcon />} to="/" />
      <ToolbarItem
        title="Tus Productos"
        icon={<AccountBalanceWalletIcon />}
        to={Products.routeName}
      />
      <ToolbarItem
        title="Transacciones"
        icon={<BarChart />}
        to={Transactions.routeName}
      />
      <ToolbarItem
        title="PrÃ©stamos"
        icon={<MonetizationOn />}
        to={Loans.routeName}
      />
      <Divider />
      <ToolbarItem
        title="Ver mi perfil"
        icon={<AccountCircleIcon />}
        to={UserProfile.routeName}
      />
    </div>
  )
}

ToolbarList.defaultProps = {
  title: "Dorabank"
}

export default ToolbarList
