import React, { FC, ReactElement} from "react";
import IHeadCell from "models/ihead-cell";
import { makeStyles } from '@material-ui/core/styles';
import {
  Table as MuiTable,
  TableBody,
  TableCell,
  TableContainer,
  TableHead,
  TableRow,
  Paper,
} from "@material-ui/core"

const useStyles = makeStyles({
  base: {
    display: "table",
    width: "100%",
    tableLayout: "fixed",
  },
  child: {
    display: "table-cell",
  },
  table: {
    minWidth: 650,
  },
})

interface ITableProps<T> {
  headerCells: IHeadCell<T>[];
  withPaper?: boolean;
  data: T[];
}

function Table<T>({ data, headerCells, withPaper }: ITableProps<T>) {
  const classes = useStyles();
  return (
    <div className={classes.base}>
      <div className={classes.child}>
        <TableContainer
          style={{ overflow: "auto" }}
          component={
            withPaper ? Paper : ({ children }) => <div>{children}</div>
          }
        >
          <MuiTable className={classes.table} aria-label="simple table">
            <TableHead>
              <TableRow>
                {headerCells.map((header: IHeadCell<T>, index: number) => (
                  <TableCell key={index}>
                    <b>{header.label}</b>
                  </TableCell>
                ))}
              </TableRow>
            </TableHead>
            <TableBody>
              {data.map((element: T, index: number) => (
                <TableRow key={index}>
                  {headerCells.map((header: IHeadCell<T>, index: number) => {
                    return (
                      <TableCell key={index}>
                        {header.renderValue
                          ? header.renderValue(element)
                          : header.propertyName
                          ? element[header.propertyName]
                          : ""}
                      </TableCell>
                    )
                  })}
                </TableRow>
              ))}
            </TableBody>
          </MuiTable>
        </TableContainer>
      </div>
    </div>
  )
}

export default Table;
